{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/hooks/useGeolocation.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface GeolocationState {\n  latitude: number | null;\n  longitude: number | null;\n  accuracy: number | null;\n  error: string | null;\n  loading: boolean;\n}\n\nexport function useGeolocation() {\n  const [state, setState] = useState<GeolocationState>({\n    latitude: null,\n    longitude: null,\n    accuracy: null,\n    error: null,\n    loading: true,\n  });\n\n  useEffect(() => {\n    if (!navigator.geolocation) {\n      setState(prev => ({\n        ...prev,\n        error: 'G√©olocalisation non support√©e par ce navigateur',\n        loading: false,\n      }));\n      return;\n    }\n\n    const handleSuccess = (position: GeolocationPosition) => {\n      setState({\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        accuracy: position.coords.accuracy,\n        error: null,\n        loading: false,\n      });\n    };\n\n    const handleError = (error: GeolocationPositionError) => {\n      let errorMessage = 'Erreur de g√©olocalisation';\n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          errorMessage = 'Permission de g√©olocalisation refus√©e';\n          break;\n        case error.POSITION_UNAVAILABLE:\n          errorMessage = 'Position non disponible';\n          break;\n        case error.TIMEOUT:\n          errorMessage = 'D√©lai de g√©olocalisation d√©pass√©';\n          break;\n      }\n      setState(prev => ({\n        ...prev,\n        error: errorMessage,\n        loading: false,\n      }));\n    };\n\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 60000,\n    });\n  }, []);\n\n  const refreshLocation = () => {\n    setState(prev => ({ ...prev, loading: true, error: null }));\n    \n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        setState({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          error: null,\n          loading: false,\n        });\n      },\n      (error) => {\n        let errorMessage = 'Erreur de g√©olocalisation';\n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = 'Permission de g√©olocalisation refus√©e';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = 'Position non disponible';\n            break;\n          case error.TIMEOUT:\n            errorMessage = 'D√©lai de g√©olocalisation d√©pass√©';\n            break;\n        }\n        setState(prev => ({\n          ...prev,\n          error: errorMessage,\n          loading: false,\n        }));\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 60000,\n      }\n    );\n  };\n\n  return { ...state, refreshLocation };\n}\n"],"names":[],"mappings":";;;AAEA;;AAFA;;AAYO,SAAS;;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAoB;QACnD,UAAU;QACV,WAAW;QACX,UAAU;QACV,OAAO;QACP,SAAS;IACX;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,IAAI,CAAC,UAAU,WAAW,EAAE;gBAC1B;gDAAS,CAAA,OAAQ,CAAC;4BAChB,GAAG,IAAI;4BACP,OAAO;4BACP,SAAS;wBACX,CAAC;;gBACD;YACF;YAEA,MAAM;0DAAgB,CAAC;oBACrB,SAAS;wBACP,UAAU,SAAS,MAAM,CAAC,QAAQ;wBAClC,WAAW,SAAS,MAAM,CAAC,SAAS;wBACpC,UAAU,SAAS,MAAM,CAAC,QAAQ;wBAClC,OAAO;wBACP,SAAS;oBACX;gBACF;;YAEA,MAAM;wDAAc,CAAC;oBACnB,IAAI,eAAe;oBACnB,OAAQ,MAAM,IAAI;wBAChB,KAAK,MAAM,iBAAiB;4BAC1B,eAAe;4BACf;wBACF,KAAK,MAAM,oBAAoB;4BAC7B,eAAe;4BACf;wBACF,KAAK,MAAM,OAAO;4BAChB,eAAe;4BACf;oBACJ;oBACA;gEAAS,CAAA,OAAQ,CAAC;gCAChB,GAAG,IAAI;gCACP,OAAO;gCACP,SAAS;4BACX,CAAC;;gBACH;;YAEA,UAAU,WAAW,CAAC,kBAAkB,CAAC,eAAe,aAAa;gBACnE,oBAAoB;gBACpB,SAAS;gBACT,YAAY;YACd;QACF;mCAAG,EAAE;IAEL,MAAM,kBAAkB;QACtB,SAAS,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,SAAS;gBAAM,OAAO;YAAK,CAAC;QAEzD,UAAU,WAAW,CAAC,kBAAkB,CACtC,CAAC;YACC,SAAS;gBACP,UAAU,SAAS,MAAM,CAAC,QAAQ;gBAClC,WAAW,SAAS,MAAM,CAAC,SAAS;gBACpC,UAAU,SAAS,MAAM,CAAC,QAAQ;gBAClC,OAAO;gBACP,SAAS;YACX;QACF,GACA,CAAC;YACC,IAAI,eAAe;YACnB,OAAQ,MAAM,IAAI;gBAChB,KAAK,MAAM,iBAAiB;oBAC1B,eAAe;oBACf;gBACF,KAAK,MAAM,oBAAoB;oBAC7B,eAAe;oBACf;gBACF,KAAK,MAAM,OAAO;oBAChB,eAAe;oBACf;YACJ;YACA,SAAS,CAAA,OAAQ,CAAC;oBAChB,GAAG,IAAI;oBACP,OAAO;oBACP,SAAS;gBACX,CAAC;QACH,GACA;YACE,oBAAoB;YACpB,SAAS;YACT,YAAY;QACd;IAEJ;IAEA,OAAO;QAAE,GAAG,KAAK;QAAE;IAAgB;AACrC;GAjGgB","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/indexedDB.ts"],"sourcesContent":["'use client';\n\nexport interface AuditData {\n  id: string;\n  title: string;\n  client: string;\n  location: string;\n  date: Date;\n  latitude?: number;\n  longitude?: number;\n  photos: string[];\n  videos: string[];\n  audioRecordings: string[];\n  transcriptions: string[];\n  anomalies: AnomalyData[];\n  floorPlan?: string;\n  signature?: string;\n  status: 'draft' | 'completed' | 'synced';\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface AnomalyData {\n  id: string;\n  type: string;\n  description: string;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  photo?: string;\n  location: { x: number; y: number };\n  suggestions: string[];\n  createdAt: Date;\n}\n\nexport interface ChatMessage {\n  id: string;\n  auditId: string;\n  userId: string;\n  userName: string;\n  message: string;\n  type: 'text' | 'audio';\n  audioData?: string;\n  timestamp: Date;\n  synced: boolean;\n}\n\nclass IndexedDBManager {\n  private dbName = 'AuditProDB';\n  private version = 1;\n  private db: IDBDatabase | null = null;\n\n  async init(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.dbName, this.version);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => {\n        this.db = request.result;\n        resolve();\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result;\n\n        // Audits store\n        if (!db.objectStoreNames.contains('audits')) {\n          const auditStore = db.createObjectStore('audits', { keyPath: 'id' });\n          auditStore.createIndex('client', 'client', { unique: false });\n          auditStore.createIndex('date', 'date', { unique: false });\n          auditStore.createIndex('status', 'status', { unique: false });\n        }\n\n        // Chat messages store\n        if (!db.objectStoreNames.contains('messages')) {\n          const messageStore = db.createObjectStore('messages', { keyPath: 'id' });\n          messageStore.createIndex('auditId', 'auditId', { unique: false });\n          messageStore.createIndex('timestamp', 'timestamp', { unique: false });\n        }\n\n        // Media files store\n        if (!db.objectStoreNames.contains('media')) {\n          db.createObjectStore('media', { keyPath: 'id' });\n        }\n      };\n    });\n  }\n\n  async saveAudit(audit: AuditData): Promise<void> {\n    if (!this.db) await this.init();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['audits'], 'readwrite');\n      const store = transaction.objectStore('audits');\n      const request = store.put(audit);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve();\n    });\n  }\n\n  async getAudit(id: string): Promise<AuditData | null> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['audits'], 'readonly');\n      const store = transaction.objectStore('audits');\n      const request = store.get(id);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve(request.result || null);\n    });\n  }\n\n  async getAllAudits(): Promise<AuditData[]> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['audits'], 'readonly');\n      const store = transaction.objectStore('audits');\n      const request = store.getAll();\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve(request.result || []);\n    });\n  }\n\n  async deleteAudit(id: string): Promise<void> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['audits'], 'readwrite');\n      const store = transaction.objectStore('audits');\n      const request = store.delete(id);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve();\n    });\n  }\n\n  async saveMessage(message: ChatMessage): Promise<void> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['messages'], 'readwrite');\n      const store = transaction.objectStore('messages');\n      const request = store.put(message);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve();\n    });\n  }\n\n  async getMessages(auditId: string): Promise<ChatMessage[]> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['messages'], 'readonly');\n      const store = transaction.objectStore('messages');\n      const index = store.index('auditId');\n      const request = index.getAll(auditId);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve(request.result || []);\n    });\n  }\n\n  async saveMedia(id: string, data: string): Promise<void> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['media'], 'readwrite');\n      const store = transaction.objectStore('media');\n      const request = store.put({ id, data });\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve();\n    });\n  }\n\n  async getMedia(id: string): Promise<string | null> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(['media'], 'readonly');\n      const store = transaction.objectStore('media');\n      const request = store.get(id);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => resolve(request.result?.data || null);\n    });\n  }\n}\n\nexport const dbManager = new IndexedDBManager();\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/ai.ts"],"sourcesContent":["'use client';\n\nexport interface TranscriptionResult {\n  text: string;\n  confidence: number;\n  language: string;\n}\n\nexport interface AnomalyDetectionResult {\n  anomalies: {\n    type: string;\n    confidence: number;\n    location: { x: number; y: number; width: number; height: number };\n    severity: 'low' | 'medium' | 'high' | 'critical';\n    description: string;\n    suggestions: string[];\n  }[];\n  overallRisk: 'low' | 'medium' | 'high' | 'critical';\n}\n\n// Simulation de transcription audio (en r√©alit√©, utiliserait une API comme OpenAI Whisper)\nexport async function transcribeAudio(audioBlob: Blob): Promise<TranscriptionResult> {\n  // Simulation d'un d√©lai de traitement\n  await new Promise(resolve => setTimeout(resolve, 2000));\n\n  // Simulation de r√©sultats bas√©s sur la dur√©e de l'audio\n  const duration = audioBlob.size / 1000; // Approximation\n  \n  const sampleTexts = [\n    \"Inspection de la zone de s√©curit√© incendie. Aucune anomalie d√©tect√©e sur les extincteurs.\",\n    \"V√©rification des sorties de secours. Signalisation conforme aux normes.\",\n    \"Contr√¥le de l'√©clairage d'urgence. Fonctionnement correct observ√©.\",\n    \"Audit des √©quipements √©lectriques. Mise √† la terre v√©rifi√©e.\",\n    \"Inspection des syst√®mes de ventilation. D√©bit d'air dans les normes.\"\n  ];\n\n  const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];\n\n  return {\n    text: randomText,\n    confidence: 0.85 + Math.random() * 0.1, // 85-95% de confiance\n    language: 'fr'\n  };\n}\n\n// Simulation d'analyse d'image pour d√©tection d'anomalies\nexport async function analyzeImage(imageFile: File): Promise<AnomalyDetectionResult> {\n  // Simulation d'un d√©lai de traitement IA\n  await new Promise(resolve => setTimeout(resolve, 3000));\n\n  // Simulation de d√©tection d'anomalies bas√©e sur le nom du fichier ou al√©atoire\n  const possibleAnomalies = [\n    {\n      type: 'fissure',\n      confidence: 0.92,\n      location: { x: 150, y: 200, width: 80, height: 20 },\n      severity: 'medium' as const,\n      description: 'Fissure d√©tect√©e dans le mur',\n      suggestions: [\n        'V√©rifier la stabilit√© structurelle',\n        'Planifier une r√©paration',\n        'Surveiller l\\'√©volution'\n      ]\n    },\n    {\n      type: 'fuite',\n      confidence: 0.78,\n      location: { x: 300, y: 150, width: 40, height: 60 },\n      severity: 'high' as const,\n      description: 'Traces d\\'humidit√© d√©tect√©es',\n      suggestions: [\n        'Localiser la source de la fuite',\n        'R√©parer imm√©diatement',\n        'V√©rifier l\\'√©tanch√©it√©'\n      ]\n    },\n    {\n      type: 'corrosion',\n      confidence: 0.85,\n      location: { x: 100, y: 300, width: 60, height: 40 },\n      severity: 'medium' as const,\n      description: 'Corrosion sur √©quipement m√©tallique',\n      suggestions: [\n        'Traitement anticorrosion',\n        'Remplacement si n√©cessaire',\n        'Maintenance pr√©ventive'\n      ]\n    }\n  ];\n\n  // S√©lection al√©atoire d'anomalies (0 √† 2)\n  const numAnomalies = Math.floor(Math.random() * 3);\n  const selectedAnomalies = possibleAnomalies\n    .sort(() => 0.5 - Math.random())\n    .slice(0, numAnomalies);\n\n  // Calcul du risque global\n  let overallRisk: 'low' | 'medium' | 'high' | 'critical' = 'low';\n  if (selectedAnomalies.length > 0) {\n    const severityLevels = { low: 1, medium: 2, high: 3, critical: 4 };\n    let maxSeverityLevel = 1;\n    let maxSeverity: 'low' | 'medium' | 'high' | 'critical' = 'low';\n    \n    selectedAnomalies.forEach(anomaly => {\n      if (severityLevels[anomaly.severity] > maxSeverityLevel) {\n        maxSeverityLevel = severityLevels[anomaly.severity];\n        maxSeverity = anomaly.severity;\n      }\n    });\n    \n    overallRisk = maxSeverity;\n  }\n\n  return {\n    anomalies: selectedAnomalies,\n    overallRisk\n  };\n}\n\n// Simulation de g√©n√©ration de suggestions bas√©es sur l'IA\nexport async function generateSuggestions(anomalyType: string, context: string): Promise<string[]> {\n  await new Promise(resolve => setTimeout(resolve, 1000));\n\n  const suggestionMap: Record<string, string[]> = {\n    fissure: [\n      '√âvaluer la cause structurelle',\n      'Mesurer l\\'√©volution dans le temps',\n      'Consulter un ing√©nieur structure',\n      'Appliquer un traitement de surface'\n    ],\n    fuite: [\n      'Identifier la source exacte',\n      'Couper l\\'alimentation si n√©cessaire',\n      'R√©parer imm√©diatement',\n      'V√©rifier les joints et raccords'\n    ],\n    corrosion: [\n      'Nettoyer la surface affect√©e',\n      'Appliquer un traitement anticorrosion',\n      'Remplacer si trop avanc√©e',\n      'Am√©liorer la ventilation'\n    ],\n    surchauffe: [\n      'V√©rifier la ventilation',\n      'Contr√¥ler la charge √©lectrique',\n      'Nettoyer les filtres',\n      'V√©rifier les connexions'\n    ]\n  };\n\n  return suggestionMap[anomalyType] || [\n    'Effectuer une inspection d√©taill√©e',\n    'Documenter l\\'anomalie',\n    'Planifier une intervention',\n    'Surveiller l\\'√©volution'\n  ];\n}\n\n// Fonction pour analyser le sentiment et la priorit√© d'un message\nexport async function analyzeMessagePriority(message: string): Promise<{\n  priority: 'low' | 'medium' | 'high' | 'urgent';\n  sentiment: 'positive' | 'neutral' | 'negative';\n  keywords: string[];\n}> {\n  await new Promise(resolve => setTimeout(resolve, 500));\n\n  const urgentKeywords = ['urgent', 'critique', 'danger', 'imm√©diat', 'arr√™t'];\n  const highKeywords = ['important', 'priorit√©', 'probl√®me', 'anomalie'];\n  const negativeKeywords = ['probl√®me', 'erreur', 'd√©faut', 'panne', 'danger'];\n  const positiveKeywords = ['ok', 'bon', 'correct', 'conforme', 'r√©ussi'];\n\n  const lowerMessage = message.toLowerCase();\n  \n  let priority: 'low' | 'medium' | 'high' | 'urgent' = 'low';\n  let sentiment: 'positive' | 'neutral' | 'negative' = 'neutral';\n  const keywords: string[] = [];\n\n  // D√©tection de priorit√©\n  if (urgentKeywords.some(keyword => lowerMessage.includes(keyword))) {\n    priority = 'urgent';\n    keywords.push(...urgentKeywords.filter(k => lowerMessage.includes(k)));\n  } else if (highKeywords.some(keyword => lowerMessage.includes(keyword))) {\n    priority = 'high';\n    keywords.push(...highKeywords.filter(k => lowerMessage.includes(k)));\n  } else if (lowerMessage.length > 100) {\n    priority = 'medium';\n  }\n\n  // D√©tection de sentiment\n  if (negativeKeywords.some(keyword => lowerMessage.includes(keyword))) {\n    sentiment = 'negative';\n  } else if (positiveKeywords.some(keyword => lowerMessage.includes(keyword))) {\n    sentiment = 'positive';\n  }\n\n  return { priority, sentiment, keywords };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 503, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 681, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 713, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS","debugId":null}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/CameraCapture.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\n\ninterface CameraCaptureProps {\n  onCapture: (data: string) => void;\n  type: 'photo' | 'video';\n}\n\nexport function CameraCapture({ onCapture, type }: CameraCaptureProps) {\n  const [isActive, setIsActive] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n  const chunksRef = useRef<Blob[]>([]);\n\n  const startCamera = useCallback(async () => {\n    try {\n      setError(null);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { width: 1280, height: 720 },\n        audio: type === 'video'\n      });\n      \n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n      setIsActive(true);\n    } catch (err) {\n      setError('Impossible d\\'acc√©der √† la cam√©ra. V√©rifiez les permissions.');\n      console.error('Camera access error:', err);\n    }\n  }, [type]);\n\n  const stopCamera = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    setIsActive(false);\n    setIsRecording(false);\n  }, []);\n\n  const capturePhoto = useCallback(() => {\n    if (!videoRef.current || !canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    const context = canvas.getContext('2d');\n    \n    if (!context) return;\n\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0);\n    \n    const dataUrl = canvas.toDataURL('image/jpeg', 0.8);\n    onCapture(dataUrl);\n    stopCamera();\n  }, [onCapture, stopCamera]);\n\n  const startVideoRecording = useCallback(() => {\n    if (!streamRef.current) return;\n\n    chunksRef.current = [];\n    const mediaRecorder = new MediaRecorder(streamRef.current, {\n      mimeType: 'video/webm;codecs=vp9'\n    });\n\n    mediaRecorder.ondataavailable = (event) => {\n      if (event.data.size > 0) {\n        chunksRef.current.push(event.data);\n      }\n    };\n\n    mediaRecorder.onstop = () => {\n      const blob = new Blob(chunksRef.current, { type: 'video/webm' });\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        onCapture(reader.result as string);\n      };\n      reader.readAsDataURL(blob);\n      stopCamera();\n    };\n\n    mediaRecorderRef.current = mediaRecorder;\n    mediaRecorder.start();\n    setIsRecording(true);\n  }, [onCapture, stopCamera]);\n\n  const stopVideoRecording = useCallback(() => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n    }\n  }, [isRecording]);\n\n  return (\n    <div className=\"space-y-4\">\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <p className=\"text-red-800\">{error}</p>\n        </div>\n      )}\n\n      {!isActive ? (\n        <div className=\"text-center py-8\">\n          <div className=\"text-6xl mb-4\">\n            {type === 'photo' ? 'üì∑' : 'üé•'}\n          </div>\n          <Button onClick={startCamera} size=\"lg\">\n            {type === 'photo' ? 'Activer la cam√©ra' : 'D√©marrer l\\'enregistrement'}\n          </Button>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          <div className=\"relative bg-black rounded-lg overflow-hidden\">\n            <video\n              ref={videoRef}\n              autoPlay\n              playsInline\n              muted\n              className=\"w-full h-64 object-cover\"\n            />\n            {isRecording && (\n              <div className=\"absolute top-4 left-4 flex items-center gap-2\">\n                <div className=\"w-3 h-3 bg-red-500 rounded-full animate-pulse\"></div>\n                <span className=\"text-white text-sm font-medium\">REC</span>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex justify-center gap-4\">\n            {type === 'photo' ? (\n              <>\n                <Button onClick={capturePhoto} size=\"lg\">\n                  <span className=\"mr-2\">üì∏</span>\n                  Prendre la photo\n                </Button>\n                <Button onClick={stopCamera} variant=\"outline\" size=\"lg\">\n                  Annuler\n                </Button>\n              </>\n            ) : (\n              <>\n                {!isRecording ? (\n                  <Button onClick={startVideoRecording} size=\"lg\">\n                    <span className=\"mr-2\">üî¥</span>\n                    D√©marrer l'enregistrement\n                  </Button>\n                ) : (\n                  <Button onClick={stopVideoRecording} size=\"lg\" variant=\"destructive\">\n                    <span className=\"mr-2\">‚èπÔ∏è</span>\n                    Arr√™ter l'enregistrement\n                  </Button>\n                )}\n                <Button onClick={stopCamera} variant=\"outline\" size=\"lg\">\n                  Annuler\n                </Button>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n\n      <canvas ref={canvasRef} className=\"hidden\" />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1081, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/AudioRecorder.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\n\ninterface AudioRecorderProps {\n  onRecordingComplete: (data: string) => void;\n}\n\nexport function AudioRecorder({ onRecordingComplete }: AudioRecorderProps) {\n  const [isRecording, setIsRecording] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  const [audioLevel, setAudioLevel] = useState(0);\n\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n  const chunksRef = useRef<Blob[]>([]);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const audioContextRef = useRef<AudioContext | null>(null);\n  const analyserRef = useRef<AnalyserNode | null>(null);\n  const animationRef = useRef<number | null>(null);\n\n  const updateAudioLevel = useCallback(() => {\n    if (!analyserRef.current) return;\n\n    const dataArray = new Uint8Array(analyserRef.current.frequencyBinCount);\n    analyserRef.current.getByteFrequencyData(dataArray);\n    \n    const average = dataArray.reduce((sum, value) => sum + value, 0) / dataArray.length;\n    setAudioLevel(average / 255);\n\n    if (isRecording && !isPaused) {\n      animationRef.current = requestAnimationFrame(updateAudioLevel);\n    }\n  }, [isRecording, isPaused]);\n\n  const startRecording = useCallback(async () => {\n    try {\n      setError(null);\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          sampleRate: 44100\n        }\n      });\n      \n      streamRef.current = stream;\n      chunksRef.current = [];\n\n      // Setup audio visualization\n      audioContextRef.current = new AudioContext();\n      const source = audioContextRef.current.createMediaStreamSource(stream);\n      analyserRef.current = audioContextRef.current.createAnalyser();\n      analyserRef.current.fftSize = 256;\n      source.connect(analyserRef.current);\n\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm;codecs=opus'\n      });\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          chunksRef.current.push(event.data);\n        }\n      };\n\n      mediaRecorder.onstop = () => {\n        const blob = new Blob(chunksRef.current, { type: 'audio/webm' });\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          onRecordingComplete(reader.result as string);\n        };\n        reader.readAsDataURL(blob);\n        cleanup();\n      };\n\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start();\n      setIsRecording(true);\n      setRecordingTime(0);\n\n      // Start timer\n      timerRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n\n      // Start audio level monitoring\n      updateAudioLevel();\n    } catch (err) {\n      setError('Impossible d\\'acc√©der au microphone. V√©rifiez les permissions.');\n      console.error('Microphone access error:', err);\n    }\n  }, [onRecordingComplete, updateAudioLevel]);\n\n  const pauseRecording = useCallback(() => {\n    if (mediaRecorderRef.current && isRecording && !isPaused) {\n      mediaRecorderRef.current.pause();\n      setIsPaused(true);\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    }\n  }, [isRecording, isPaused]);\n\n  const resumeRecording = useCallback(() => {\n    if (mediaRecorderRef.current && isRecording && isPaused) {\n      mediaRecorderRef.current.resume();\n      setIsPaused(false);\n      \n      // Resume timer\n      timerRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n\n      // Resume audio level monitoring\n      updateAudioLevel();\n    }\n  }, [isRecording, isPaused, updateAudioLevel]);\n\n  const stopRecording = useCallback(() => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      setIsPaused(false);\n    }\n  }, [isRecording]);\n\n  const cleanup = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n      animationRef.current = null;\n    }\n    if (audioContextRef.current) {\n      audioContextRef.current.close();\n      audioContextRef.current = null;\n    }\n    setRecordingTime(0);\n    setAudioLevel(0);\n  }, []);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  useEffect(() => {\n    return cleanup;\n  }, [cleanup]);\n\n  return (\n    <div className=\"space-y-6\">\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <p className=\"text-red-800\">{error}</p>\n        </div>\n      )}\n\n      {!isRecording ? (\n        <div className=\"text-center py-8\">\n          <div className=\"text-6xl mb-4\">üé§</div>\n          <Button onClick={startRecording} size=\"lg\">\n            <span className=\"mr-2\">üî¥</span>\n            Commencer l'enregistrement\n          </Button>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {/* Recording Status */}\n          <div className=\"text-center\">\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\n              <div className={`w-3 h-3 rounded-full ${\n                isPaused ? 'bg-yellow-500' : 'bg-red-500 animate-pulse'\n              }`}></div>\n              <span className=\"text-lg font-medium\">\n                {isPaused ? 'EN PAUSE' : 'ENREGISTREMENT'}\n              </span>\n            </div>\n            <div className=\"text-2xl font-mono\">\n              {formatTime(recordingTime)}\n            </div>\n          </div>\n\n          {/* Audio Level Visualization */}\n          <div className=\"flex justify-center\">\n            <div className=\"flex items-end gap-1 h-16\">\n              {Array.from({ length: 20 }, (_, i) => (\n                <div\n                  key={i}\n                  className={`w-2 bg-gradient-to-t from-green-500 to-red-500 rounded-t transition-all duration-100 ${\n                    audioLevel * 20 > i ? 'opacity-100' : 'opacity-20'\n                  }`}\n                  style={{\n                    height: `${Math.max(4, (audioLevel * 20 > i ? (i + 1) * 3 : 1))}px`\n                  }}\n                />\n              ))}\n            </div>\n          </div>\n\n          {/* Controls */}\n          <div className=\"flex justify-center gap-4\">\n            {!isPaused ? (\n              <Button onClick={pauseRecording} variant=\"outline\" size=\"lg\">\n                <span className=\"mr-2\">‚è∏Ô∏è</span>\n                Pause\n              </Button>\n            ) : (\n              <Button onClick={resumeRecording} variant=\"outline\" size=\"lg\">\n                <span className=\"mr-2\">‚ñ∂Ô∏è</span>\n                Reprendre\n              </Button>\n            )}\n            \n            <Button onClick={stopRecording} size=\"lg\" variant=\"destructive\">\n              <span className=\"mr-2\">‚èπÔ∏è</span>\n              Arr√™ter\n            </Button>\n          </div>\n\n          {/* Recording Tips */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-medium text-blue-900 mb-2\">üí° Conseils d'enregistrement</h4>\n            <ul className=\"text-sm text-blue-800 space-y-1\">\n              <li>‚Ä¢ Parlez clairement et √† un rythme normal</li>\n              <li>‚Ä¢ Maintenez une distance constante du microphone</li>\n              <li>‚Ä¢ √âvitez les bruits de fond</li>\n              <li>‚Ä¢ La transcription sera automatique apr√®s l'arr√™t</li>\n            </ul>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1547, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/audit/capture/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from '@/components/Providers';\nimport { useGeolocation } from '@/hooks/useGeolocation';\nimport { useSync } from '@/hooks/useSync';\nimport { dbManager, AuditData } from '@/lib/indexedDB';\nimport { transcribeAudio } from '@/lib/ai';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { CameraCapture } from '@/components/CameraCapture';\nimport { AudioRecorder } from '@/components/AudioRecorder';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default function CapturePage() {\n  const { t } = useTranslation();\n  const { latitude, longitude, error: locationError } = useGeolocation();\n  const { addPendingItem } = useSync();\n  \n  const [currentAudit, setCurrentAudit] = useState<Partial<AuditData>>({\n    id: uuidv4(),\n    title: '',\n    client: '',\n    location: '',\n    date: new Date(),\n    photos: [],\n    videos: [],\n    audioRecordings: [],\n    transcriptions: [],\n    anomalies: [],\n    status: 'draft',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  });\n\n  const [activeTab, setActiveTab] = useState<'photo' | 'video' | 'audio'>('photo');\n  const [comment, setComment] = useState('');\n  const [isTranscribing, setIsTranscribing] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const handleMediaCapture = async (mediaData: string, type: 'photo' | 'video' | 'audio') => {\n    const mediaId = uuidv4();\n    \n    // Save media to IndexedDB\n    await dbManager.saveMedia(mediaId, mediaData);\n    \n    // Update current audit\n    setCurrentAudit(prev => ({\n      ...prev,\n      [type === 'photo' ? 'photos' : type === 'video' ? 'videos' : 'audioRecordings']: [\n        ...(prev[type === 'photo' ? 'photos' : type === 'video' ? 'videos' : 'audioRecordings'] || []),\n        mediaId\n      ],\n      updatedAt: new Date(),\n    }));\n\n    // If audio, transcribe it\n    if (type === 'audio') {\n      setIsTranscribing(true);\n      try {\n        // Convert base64 to blob for transcription\n        const response = await fetch(mediaData);\n        const blob = await response.blob();\n        const transcription = await transcribeAudio(blob);\n        \n        setCurrentAudit(prev => ({\n          ...prev,\n          transcriptions: [...(prev.transcriptions || []), transcription.text],\n          updatedAt: new Date(),\n        }));\n      } catch (error) {\n        console.error('Transcription failed:', error);\n      } finally {\n        setIsTranscribing(false);\n      }\n    }\n  };\n\n  const handleSaveAudit = async () => {\n    if (!currentAudit.title || !currentAudit.client) {\n      alert('Veuillez remplir le titre et le client');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const auditToSave: AuditData = {\n        ...currentAudit,\n        latitude,\n        longitude,\n        updatedAt: new Date(),\n      } as AuditData;\n\n      await dbManager.saveAudit(auditToSave);\n      addPendingItem();\n      \n      // Reset form\n      setCurrentAudit({\n        id: uuidv4(),\n        title: '',\n        client: '',\n        location: '',\n        date: new Date(),\n        photos: [],\n        videos: [],\n        audioRecordings: [],\n        transcriptions: [],\n        anomalies: [],\n        status: 'draft',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      });\n      setComment('');\n      \n      alert('Audit sauvegard√© avec succ√®s!');\n    } catch (error) {\n      console.error('Error saving audit:', error);\n      alert('Erreur lors de la sauvegarde');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-foreground\">{t('capture.title')}</h1>\n        <p className=\"text-muted-foreground mt-2\">\n          Capturez photos, vid√©os et commentaires audio pour votre audit\n        </p>\n      </div>\n\n      {/* Location Status */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg\">üìç</span>\n            <div>\n              {locationError ? (\n                <span className=\"text-red-600\">{locationError}</span>\n              ) : latitude && longitude ? (\n                <span className=\"text-green-600\">\n                  Position: {latitude.toFixed(6)}, {longitude.toFixed(6)}\n                </span>\n              ) : (\n                <span className=\"text-yellow-600\">Localisation en cours...</span>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Audit Info Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Informations de l'audit</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Titre de l'audit</label>\n              <Input\n                value={currentAudit.title || ''}\n                onChange={(e) => setCurrentAudit(prev => ({ ...prev, title: e.target.value }))}\n                placeholder=\"Ex: Audit s√©curit√© incendie\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Client</label>\n              <Input\n                value={currentAudit.client || ''}\n                onChange={(e) => setCurrentAudit(prev => ({ ...prev, client: e.target.value }))}\n                placeholder=\"Nom du client\"\n              />\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Lieu</label>\n            <Input\n              value={currentAudit.location || ''}\n              onChange={(e) => setCurrentAudit(prev => ({ ...prev, location: e.target.value }))}\n              placeholder=\"Adresse ou description du lieu\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Media Capture Tabs */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex space-x-1 bg-muted p-1 rounded-lg\">\n            {(['photo', 'video', 'audio'] as const).map((tab) => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${\n                  activeTab === tab\n                    ? 'bg-background text-foreground shadow-sm'\n                    : 'text-muted-foreground hover:text-foreground'\n                }`}\n              >\n                {tab === 'photo' && 'üì∑'} {tab === 'video' && 'üé•'} {tab === 'audio' && 'üé§'}\n                {' '}\n                {t(`capture.${tab}`)}\n              </button>\n            ))}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {activeTab === 'photo' && (\n            <CameraCapture\n              onCapture={(data) => handleMediaCapture(data, 'photo')}\n              type=\"photo\"\n            />\n          )}\n          {activeTab === 'video' && (\n            <CameraCapture\n              onCapture={(data) => handleMediaCapture(data, 'video')}\n              type=\"video\"\n            />\n          )}\n          {activeTab === 'audio' && (\n            <AudioRecorder\n              onRecordingComplete={(data) => handleMediaCapture(data, 'audio')}\n            />\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Comment Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle>{t('capture.comment')}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Textarea\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n            placeholder=\"Ajoutez vos commentaires sur cet audit...\"\n            rows={4}\n          />\n        </CardContent>\n      </Card>\n\n      {/* Transcription Status */}\n      {isTranscribing && (\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary\"></div>\n              <span>{t('capture.transcribing')}</span>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Transcriptions Display */}\n      {currentAudit.transcriptions && currentAudit.transcriptions.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Transcriptions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              {currentAudit.transcriptions.map((transcription, index) => (\n                <div key={index} className=\"p-3 bg-muted/50 rounded-lg\">\n                  <p className=\"text-sm\">{transcription}</p>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Captured Media Summary */}\n      {(currentAudit.photos?.length || currentAudit.videos?.length || currentAudit.audioRecordings?.length) && (\n        <Card>\n          <CardHeader>\n            <CardTitle>M√©dias captur√©s</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-3 gap-4 text-center\">\n              <div>\n                <div className=\"text-2xl\">üì∑</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {currentAudit.photos?.length || 0} photos\n                </div>\n              </div>\n              <div>\n                <div className=\"text-2xl\">üé•</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {currentAudit.videos?.length || 0} vid√©os\n                </div>\n              </div>\n              <div>\n                <div className=\"text-2xl\">üé§</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {currentAudit.audioRecordings?.length || 0} audios\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Save Button */}\n      <div className=\"flex justify-end\">\n        <Button \n          onClick={handleSaveAudit} \n          disabled={saving || !currentAudit.title || !currentAudit.client}\n          size=\"lg\"\n        >\n          {saving ? (\n            <>\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2\"></div>\n              Sauvegarde...\n            </>\n          ) : (\n            <>\n              <span className=\"mr-2\">üíæ</span>\n              {t('capture.save')}\n            </>\n          )}\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}